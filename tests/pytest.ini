[pytest]
# pytest配置文件

# 测试路径
testpaths = tests

# Python文件匹配模式
python_files = test_*.py *_test.py

# Python类匹配模式
python_classes = Test*

# Python函数匹配模式
python_functions = test_*

# 测试发现
addopts =
    -v
    --strict-markers
    --tb=short
    --asyncio-mode=auto
    --disable-warnings

# 标记定义
markers =
    unit: 单元测试标记
    integration: 集成测试标记
    slow: 慢速测试标记
    parser: 解析器相关测试
    change_detection: 变化检测相关测试
    api: API端点测试
    graphiti: Graphiti相关测试
    llm: LLM服务测试
    requires_neo4j: 需要Neo4j数据库的测试
    requires_redis: 需要Redis的测试
    mock: 使用mock的测试
    real: 使用真实服务的测试

# 日志配置
log_cli = false
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# 覆盖率配置（需要安装pytest-cov）
# addopts = --cov=api-service --cov-report=html --cov-report=term --cov-report=json

# 最小覆盖率要求
# cov-fail-under = 80

# 覆盖率报告格式
# cov-report = html
# cov-report = term
# cov-report = json

# 要覆盖的包
# cov-source = api-service

# 排除的路径
# cov-exclude =
#     */tests/*
#     */migrations/*
#     */venv/*
#     */__pycache__/*
